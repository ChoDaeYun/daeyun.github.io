I"‘_<h1 id="ì• í”Œë¡œê·¸ì¸-ì ìš©ì„-í•´ì•¼-í•˜ëŠ”ê°€">ì• í”Œë¡œê·¸ì¸ ì ìš©ì„ í•´ì•¼ í•˜ëŠ”ê°€â€¦</h1>
<p>IOS ì•±ì˜ ê²½ìš° ì†Œì…œë¡œê·¸ì¸ì„ ê¸°ì¡´ì— ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ 2020ë…„ 4ì›”ë¶€í„°ëŠ” ì• í”Œë¡œê·¸ì¸ì„ ë¶™ì—¬ í•˜ëŠ” ì´ìŠˆê°€ ìˆìŠµë‹ˆë‹¤. <br />
ì´ëŸ° ì´ìŠˆì— ëŒ€í•œ ì¤€ë¹„ë¥¼ í•˜ê¸° ìœ„í•´ ëŠ¦ì—ˆì§€ë§Œ ìë°” ë°±ì—”ë“œì—ì„œ ì• í”Œ ë¡œê·¸ì¸ì‹œ í™•ì¸ì´ í•„ìš” í•œ ë¶€ë¶„ì— ëŒ€í•´ì„œ í•œë²ˆ ë³¼ê¹Œ í•©ë‹ˆë‹¤.  <br />
<a href="https://developer.apple.com/kr/news/?id=09122019b" target="_blank">Appleë¡œ ë¡œê·¸ì¸ì— ëŒ€í•œ ì‹ ê·œ ê°€ì´ë“œ ( 2019ë…„ 09ì›” 12ì¼)</a><br />
<a href="https://developer.apple.com/kr/app-store/review/guidelines/" target="_blank">App Strore ì‹¬ì‚¬ ì§€ì¹¨ì„œ </a><br /></p>

<p>ì„¤ì •ì— ëŒ€í•œ ë¶€ë¶„ì€ ìš°ì„  ì¼ë¶€ ë‚´ìš©ì„ ë„˜ì–´ ê°ˆê¹Œ í•©ë‹ˆë‹¤.  <br />
êµ¬ê¸€ê²€ìƒ‰ì—ì„œ ì›Œë‚™ ë§ì´ë“¤ ê²€ìƒ‰ì´ ë˜ê³  ìˆì–´ êµ³ì´ ì–¸ê¸‰í•  í•„ìš”ì„±ì„ ëª»ëŠê»´ì„œ ì…ë‹ˆë‹¤.  <br /></p>

<p>ê·¸ë ‡ë‹¤ë©´ ë¨¼ì € IOS ì•± ë‚´ì—ì„œ ë¡œê·¸ì¸ ì•„ì´ë”” ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ëë‚œë’¤ì— ì§„í–‰ë˜ëŠ” íë¦„ì€ ë‹¤ìŒ ì´ë¯¸ì§€ì™€ ê°™ìŠµë‹ˆë‹¤. <br />
<img src="/assets/images/884cba8b-78cd-4bb1-91af-909591ece5dd.png" width="452" height="auto" />
https://developer.apple.com/documentation/sign_in_with_apple/sign_in_with_apple_rest_api/verifying_a_user</p>

<p>ì‰½ê²Œ ì•±ì—ì„œ APIì„œë²„ë¡œ authorization code ê°’ì„ ë³´ë‚´ê³  í•´ë‹¹ code ê°’ì„ ê°€ì§€ê³  ì •ìƒì ì¸ ë¡œê·¸ì¸ ì ‘ê·¼ì¸ì§€ë¥¼ í™•ì¸í•˜ë¼ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤. <br />
ì• í”Œ ê°€ì´ë“œëŒ€ë¡œë¼ë©´ ë°±ì—”ë“œ ì„œë²„ì—ì„œ ë‘ê°€ì§€ ì²˜ë¦¬ìš”ì†Œë§Œ ì¤€ë¹„ í•˜ë©´ë©ë‹ˆë‹¤.</p>
<ol>
  <li>Authorization code ê°’ ì¸ì¦ í•˜ê¸°  - ë¡œê·¸ì¸ ë˜ëŠ” íšŒì›ê°€ì…ì‹œ ì¸ì¦ì— ì‚¬ìš©ë˜ëŠ” ì½”ë“œ ( ì¼íšŒì„±ìœ¼ë¡œ APIí˜¸ì¶œì‹œ ìƒˆë¡œìš´ Authorization code ê°€ ë°œê¸‰ë©ë‹ˆë‹¤. (api í˜¸ì¶œí•˜ë©´ accesstoken ê°’ì´ authoriztion code ê°’ì„ ë‚˜íƒ€ ëƒ…ë‹ˆë‹¤. ))</li>
  <li>refresh token ê²€ì¦í•˜ê¸°  - ì„œë¹„ìŠ¤ ì¤‘ ì• í”Œì—ì„œ ì—°ë™ì´ ëœ ê³„ì •ì´ ë§ëŠ”ì§€ í™•ì¸í• ë•Œ ì‚¬ìš©ëœë‹¤.  í•˜ë£¨ì— í•œë²ˆ ì •ë„ë§Œ í˜¸ì¶œí•˜ë¼ê³  ê°€ì´ë“œê°€ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</li>
</ol>

<p>Generate and validate tokens URL : <a href="https://developer.apple.com/documentation/sign_in_with_apple/generate_and_validate_tokens">ì• í”Œ ê°€ì´ë“œ</a><br />
Apple Api URL : https://appleid.apple.com/auth/token</p>
<h1 id="ì‚¬ìš©í•œ-ì˜ì¡´ì„±">ì‚¬ìš©í•œ ì˜ì¡´ì„±</h1>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c">&lt;!-- JJWT --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>io.jsonwebtoken<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>jjwt-api<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.10.7<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>        
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>io.jsonwebtoken<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>jjwt-impl<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.10.7<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>io.jsonwebtoken<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>jjwt-jackson<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.10.7<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="c">&lt;!-- openssl  --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.bouncycastle<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>bcpkix-jdk15on<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.61<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="c">&lt;!-- unirest-java  --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>com.mashape.unirest<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>unirest-java<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.4.9<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<h1 id="ê¸°ë³¸-ê³µí†µ">ê¸°ë³¸ ê³µí†µ</h1>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="no">AUTH_TOKEN</span> <span class="o">=</span> <span class="s">"https://appleid.apple.com/auth/token"</span><span class="o">;</span>   
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="no">TEAM_ID</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span> <span class="c1">// ì• í”Œ ê°œë°œì ì„¼í„°ì— ë“±ë¡í•œ TEAM ID </span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="no">CLIENT_ID</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span> <span class="c1">//ì• í”Œ ê°œë°œì ì„¼í„°ì—ì„œ ë“±ë¡ì‹œ app , servier id ( ios ì™€ web&amp;android ê°ê° ë°œê¸‰ë°›ì•„ì•¼ ì„œë¹„ìŠ¤ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.)</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="no">KEY_ID</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span> <span class="c1">// í‚¤ ID ( ì˜ëª¨ë¥´ë©´ p8 íŒŒì¼ ë°›ì„ë•Œ AuthKey_{KEY_ID}.p8 íŒŒì¼ëª… ì í˜€ ìˆìŠµë‹ˆë‹¤. )</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">PrivateKey</span> <span class="n">pKey</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">PrivateKey</span> <span class="nf">getPrivateKey</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>        
         
        <span class="kd">final</span> <span class="nc">PEMParser</span> <span class="n">pemParser</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PEMParser</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileReader</span><span class="o">(</span><span class="s">"ì• í”Œì„¤ì •ì‹œ ë‹¤ìš´ë¡œë“œ ë°›ì€ p8íŒŒì¼ ê²½ë¡œ"</span><span class="o">));</span>
        <span class="kd">final</span> <span class="nc">JcaPEMKeyConverter</span> <span class="n">converter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JcaPEMKeyConverter</span><span class="o">();</span>
        <span class="kd">final</span> <span class="nc">PrivateKeyInfo</span> <span class="n">object</span> <span class="o">=</span> <span class="o">(</span><span class="nc">PrivateKeyInfo</span><span class="o">)</span> <span class="n">pemParser</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
        <span class="kd">final</span> <span class="nc">PrivateKey</span> <span class="n">pKey</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="na">getPrivateKey</span><span class="o">(</span><span class="n">object</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">pKey</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">generateJWT</span><span class="o">(</span><span class="nc">Boolean</span> <span class="n">webBool</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">pKey</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">pKey</span> <span class="o">=</span> <span class="n">getPrivateKey</span><span class="o">();</span>
      <span class="o">}</span>
      <span class="nc">String</span> <span class="n">token</span> <span class="o">=</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">setHeaderParam</span><span class="o">(</span><span class="nc">JwsHeader</span><span class="o">.</span><span class="na">KEY_ID</span><span class="o">,</span> <span class="no">KEY_ID</span><span class="o">)</span>
              <span class="o">.</span><span class="na">setIssuer</span><span class="o">(</span><span class="no">TEAM_ID</span><span class="o">)</span>
              <span class="o">.</span><span class="na">setAudience</span><span class="o">(</span><span class="s">"https://appleid.apple.com"</span><span class="o">)</span>
              <span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="no">CLIENT_ID</span><span class="o">)</span>
              <span class="o">.</span><span class="na">setExpiration</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">+</span> <span class="o">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">10</span><span class="o">)))</span>
              <span class="o">.</span><span class="na">setIssuedAt</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()))</span>
              <span class="o">.</span><span class="na">signWith</span><span class="o">(</span><span class="n">pKey</span><span class="o">,</span><span class="nc">SignatureAlgorithm</span><span class="o">.</span><span class="na">ES256</span><span class="o">)</span>
              <span class="o">.</span><span class="na">compact</span><span class="o">();</span>
      <span class="k">return</span> <span class="n">token</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">generateJWT</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">pKey</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">pKey</span> <span class="o">=</span> <span class="n">getPrivateKey</span><span class="o">();</span>
      <span class="o">}</span>
      <span class="nc">String</span> <span class="n">token</span> <span class="o">=</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">setHeaderParam</span><span class="o">(</span><span class="nc">JwsHeader</span><span class="o">.</span><span class="na">KEY_ID</span><span class="o">,</span> <span class="no">KEY_ID</span><span class="o">)</span>
              <span class="o">.</span><span class="na">setIssuer</span><span class="o">(</span><span class="no">TEAM_ID</span><span class="o">)</span>
              <span class="o">.</span><span class="na">setAudience</span><span class="o">(</span><span class="s">"https://appleid.apple.com"</span><span class="o">)</span>
              <span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="no">CLIENT_ID</span><span class="o">)</span>
              <span class="o">.</span><span class="na">setExpiration</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">+</span> <span class="o">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">10</span><span class="o">)))</span>
              <span class="o">.</span><span class="na">setIssuedAt</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()))</span>
              <span class="o">.</span><span class="na">signWith</span><span class="o">(</span><span class="n">pKey</span><span class="o">,</span><span class="nc">SignatureAlgorithm</span><span class="o">.</span><span class="na">ES256</span><span class="o">)</span>
              <span class="o">.</span><span class="na">compact</span><span class="o">();</span>
      <span class="k">return</span> <span class="n">token</span><span class="o">;</span>
    <span class="o">}</span>

</code></pre></div></div>
<h1 id="authorization-code-ì¸ì¦í•˜ê¸°">Authorization code ì¸ì¦í•˜ê¸°</h1>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">authToken</span><span class="o">(</span><span class="nc">String</span> <span class="n">code</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>
    <span class="nc">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">generateJWT</span><span class="o">();</span>

    <span class="nc">HttpResponse</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="nc">Unirest</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="no">AUTH_TOKEN</span><span class="o">)</span>
                  <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="o">)</span>
          <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">"client_id"</span><span class="o">,</span> <span class="no">CLIENT_ID</span><span class="o">)</span>
          <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">"client_secret"</span><span class="o">,</span> <span class="n">token</span><span class="o">)</span>
          <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">"grant_type"</span><span class="o">,</span> <span class="s">"authorization_code"</span><span class="o">)</span>
          <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="n">code</span><span class="o">)</span>
              <span class="o">.</span><span class="na">asString</span><span class="o">();</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getStatus</span><span class="o">());</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getBody</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì´ë•Œ ë¦¬í„´ëœ ì „ë‹¬ ëœ ê°’ì„ í†µí•´ authorization code ê·¸ë¦¬ê³  refresh token , apple id ,email ê°’ì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
(ì´ë¦„ì˜ ê²½ìš° iosì—ì„œ ì „ë‹¬ì„ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. )</p>

<h1 id="refresh-token-ê²€ì¦-í•˜ê¸°">Refresh Token ê²€ì¦ í•˜ê¸°</h1>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">authRefreshToken</span><span class="o">(</span><span class="nc">String</span> <span class="n">refreshToken</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>
    <span class="nc">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">generateJWT</span><span class="o">();</span>
    <span class="nc">HttpResponse</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="nc">Unirest</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="no">AUTH_TOKEN</span><span class="o">)</span>
                  <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="o">)</span>
              <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">"client_id"</span><span class="o">,</span> <span class="no">CLIENT_ID</span><span class="o">)</span>
              <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">"client_secret"</span><span class="o">,</span> <span class="n">token</span><span class="o">)</span>
              <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">"grant_type"</span><span class="o">,</span> <span class="s">"refresh_token"</span><span class="o">)</span>
              <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">"refresh_token"</span><span class="o">,</span> <span class="n">refreshToken</span><span class="o">)</span>
              <span class="o">.</span><span class="na">asString</span><span class="o">();</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getStatus</span><span class="o">());</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getBody</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì•„ë¬´ë˜ë„ 1ì¼ 1íšŒ í˜¸ì¶œì´ë¼ëŠ” ê°€ì´ë“œê°€ ê³„ì† ëˆˆì— ë°ŸíˆëŠ”ë° 
1ì¼ 1íšŒ í˜¸ì¶œì´ë¼í•˜ë©´ ê²°êµ­ ë¡œê·¸ì¸ì´ ìœ ì§€ ë˜ëŠ” ì„œë¹„ìŠ¤ì˜ ê²½ìš° 24ì‹œê°„ ì´í›„ ì—°ê²°ì´ ëŠì–´ ì§€ëŠ”ê²Œ ë°˜ì˜ì´ ëœë‹¤. 
ë‹¨ ì• í”Œ ê¸°ê¸°ë¥¼ í†µí•˜ì—¬ ë¡œê·¸ì¸ í•˜ì˜€ë‹¤ë©´ ì¦‰ì‹œ ë°˜ì˜ì´ ê°€ëŠ¥í•˜ë‹¤.<br />( ì• í”Œì„œë²„ -&gt; IOS ê¸°ê¸° í˜¸ì¶œ , ì›¹ê³¼ ì•ˆë“œë¡œì´ë“œë§Œ í–ˆë‹¤ë©´ â€¦ ì§€ì›ì´ ì•ˆë˜ëŠ”ê±° ê°™ì•„ ë³´ì…ë‹ˆë‹¤. )</p>

<h1 id="ì›¹-ì• í”Œë¡œê·¸ì¸">ì›¹ ì• í”Œë¡œê·¸ì¸</h1>
<p>ì•ˆë“œë¡œì´ë“œì™€ ì•±ì˜ ê²½ìš° IOSì™€ ëŠ” ë‹¤ë¥¸  CLIENT ID ê°’ìœ¼ë¡œ ë¡œê·¸ì¸ì„ ì§„í–‰í•´ì£¼ì…”ì•¼ì§€ë§Œ í•©ë‹ˆë‹¤. 
ë˜í•œ ë¡œê·¸ì¸ ì‚¬ì „ì— ë¡œê·¸ì¸í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ URL ì— ëŒ€í•œ ì„¤ì • ê·¸ë¦¬ê³  ë„ë©”ì¸ ì¶”ê°€ ì‘ì—…ì´ í•„ìš” í•©ë‹ˆë‹¤.</p>

<h1 id="ë¡œê·¸ì„-ë²„íŠ¼-ì ìš©-í•˜ê¸°">ë¡œê·¸ì„ ë²„íŠ¼ ì ìš© í•˜ê¸°</h1>
<p>Human Interface Guidelines (Button) : <a href="https://developer.apple.com/design/human-interface-guidelines/sign-in-with-apple/overview/buttons/" target="_blank">ê°€ì´ë“œ</a><br />
(ë­”ê°€ ê¹Œë‹¤ë¡­ë‹¤.. ê±°ì°¸.. ê·¸ëŸ¬ë‹ˆâ€¦ì§ì ‘ì•ˆë§Œë“¤ê³  ì œê³µí•´ì£¼ëŠ”ê²ƒì„ ì‚¬ìš©í•˜ì.. )</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;style&gt;</span>
    <span class="nc">.signin-button</span> <span class="p">{</span>
        <span class="nl">width</span><span class="p">:</span> <span class="m">240px</span><span class="p">;</span>
        <span class="nl">height</span><span class="p">:</span> <span class="m">40px</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"appleid-signin"</span> <span class="na">class=</span><span class="s">"signin-button"</span> <span class="na">data-color=</span><span class="s">"black"</span> <span class="na">data-border=</span><span class="s">"false"</span> <span class="na">data-type=</span><span class="s">"sign in"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">AppleID</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
        <span class="na">clientId</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">{CLIENT_ID}</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">scope</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name email</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">redirectURI</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{REDIRECT_URI}</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">state</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">web</span><span class="dl">'</span>
    <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<h1 id="authorization-code-ì¸ì¦í•˜ê¸°-ì›¹">Authorization code ì¸ì¦í•˜ê¸° (ì›¹)</h1>
<p>ë¦¬ë‹¤ì´ë ‰íŠ¸ë¡œ ì „ë‹¬ ë°›ì„ ê²½ìš° POSTë¡œ ë‚´ìš©ì´ ì „ë‹¬ ë˜ë©° ì „ë‹¬ë˜ëŠ” ë‚´ìš©ì¤‘ ë‹¤ìŒê³¼ ê°™ì€ ê°’ì´ ì¡´ì¬ í•˜ë©° í™œìš©í•˜ë©´ë©ë‹ˆë‹¤. <br />
code : authorization code ê°’
user : scopeì—ì„œ ì´ë¦„ê³¼ ì´ë©”ì¼ ìš”ì²­í•œ ê²½ìš° í•´ë‹¹ ê°’ì´ userë¼ëŠ” ë³€ìˆ˜ì— í†µí•´ ì „ë‹¬ì´ ë©ë‹ˆë‹¤. 
state : ì›¹,ì•ˆë“œë¡œì´ë“œì—ì„œ ìš”ì²­ì‹œ ì „ë‹¬í•œ ê°’ (ì•ˆì¨ë„ ë¡œê·¸ì¸ì€ ì˜ë©ë‹ˆë‹¤.)
ì „ë‹¬í•˜ëŠ” ê°’ì´ í‹€ë¦´ë¿ ê²°êµ­ ì¸ì¦ì„ í•˜ëŠ” ë°©ì‹ì€ ë™ì¼í•˜ê²Œ ì²˜ë¦¬ ë©ë‹ˆë‹¤.<br />
ì½”ë“œ ìƒëµ â€¦.</p>

<p>ëŒ€ëµì ìœ¼ë¡œ ìœ„ì™€ ê°™ì€ ê¸°ëŠ¥ë“¤ë§Œ ìˆìœ¼ë©´ ë¡œê·¸ì¸ ì´ë‚˜ íšŒì›ê°€ì…ì‹œ ê¸°ì´ˆ ë°ì´í„°ë¥¼ ë°›ì•„ ì˜¤ëŠ” ë¶€ë¶„ì— ëŒ€í•œ ë°±ì—”ë“œ ì¤€ë¹„ëŠ” ì™„ë£Œ ë˜ëŠ”ê²ƒì…ë‹ˆë‹¤. 
ê°„ëµí•œ ì†ŒìŠ¤ëŠ” github ì— ì˜¬ë ¤ ë†“ì•˜ìŠµë‹ˆë‹¤. ì°¸ê³ ìš©ìœ¼ë¡œ ì œê³µë˜ëŠ” ë¶€ë¶„ì´ë‹ˆ ì†ŒìŠ¤ ë¶€ë¶„ì„ ë³´ì‹œê³  í™œìš©í•˜ì‹œë©´ ë  ë“¯í•©ë‹ˆë‹¤.</p>

<p><a href="https://github.com/ChoDaeYun/apple-authtoken" target="_blank">https://github.com/ChoDaeYun/apple-authtoken</a></p>

<p>ì•„ì§ê¹Œì§€ëŠ” ì• í”Œë¡œê·¸ì¸ê°œë°œì— ëŒ€í•´ì„œ ë­ê°€ ë‹µì´ë‹¤ ì•„ë‹ˆë‹¤ ë‚˜ì™€ ìˆëŠ” ë¶€ë¶„ì€ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. 
ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ â€¦ ìì‹ ì˜ ì„œë¹„ìŠ¤ì— ë§ê²Œ ì˜ë§Œë“¤ë©´ ë˜ì§€ ì•Šë‚˜ ìƒê°í•©ë‹ˆë‹¤.</p>
:ET